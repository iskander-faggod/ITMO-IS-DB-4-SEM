# Лекция 10

## Распределённые БД

### Предпосылки возникновения:

1) СУБД - может стать bottleneck'ом приложения

2) Естественная распределённость

3) Проблемы с железной мощностью (не можем сделать большое и быстрое хранилище)


**Распределённая бд** - набор логически связанных между собой, разделяемых данных и их описаний, которые физически распределены по нескольким вычислительным узлам.

Когда мы говорим, что мы разделяем отношение на несколько - мы делаем **фрагментирование**, образовавшиеся компоненты = **фрагменты**. 

**Фрагментирование** может осуществляется разными способами:

1) Вертикальное - пытаемся хранить таблицу не как кортежи со всеми аттрибутами, а отдельно храним аттрибуты 
2) Горизонтальное (шардорование) - выделение подмножеств строк
3) Смешанное - выделяем области строк и аттрибутов

Репликация - поддержка актуальности копий фрагментов на нескольких узлах - реплика.

### Стратегия размещения данных в распределённой системе:

1) **Раздельное** (фрагментированное) размещение

    * БД разбивается на непересекающиеся фрагменты, где каждый фрагмент располагается строго на одном узле

2) **Размещение** с полной **репликацией** 

    * На каждом узле полная синхронизированная копия БД

3) **Размещение** с выборочной **репликацией**

    * Разделяем БД на фрагменты и решаем 2 задачи:
        1) Сколько копий сделать
        2) Где их расположить
 
        _СУБД должна принимать данные решения и абстрагировать их от приложения_

Распределенная СУБД (по Дейту) - комплекс программ, предназначенный для управления распределенной БД и позволяющий сделать распределеннность информации прозрачной для конечного пользователя.

### 4 принципа прозрачности: 

1) Прозрачность фрагментации - пользователь не знает, как фрагментирован объект в БД

2) Прозрачность расположения объекта - пользователь не знает, на каком конкретном узле расположен тот фрагмент, к которому он обращается

3) Прозрачность кол-ва реплик - пользователь не может обратиться к конкретной реплике 

4) Прозрачность контроля доступа - пользователь получавший отказ в доступе не знает, нет ли там данных или просто у него нет доступа

### Типы распределённых бд:

1) Гамогенные - одна СУБД на всех узлах
2) Гетерогенные - различные СУБД на всех узлах


### 12 правил распределенных БД:

1. **Локальная автономность** - локальные данные принадлежат локальным владельцам и локально сопровождаются (на каждом узле есть свой управленец БД, и только он имеет доступ управления к ним)

2. **Отсутствие опоры на центральный узел** - в системе не должно быть ни одного узла, без которого система не может функционировать

3. **Непрерывное функционирование** - в системе не должна возникать потребность в плановой остановке её функционирования

4. **Независимость от расположения** - любой пользователь может получить доступ к данным хранящимся на любом узле вне зависимости от того, где он и где эти данные

5. **Независимость от фрагментации** - пользователь должен получать доступ к данным вне зависимости от способа их фрагментации

6. **Независимость от репликации** - пользователь не должен нуждаться в сведениях о наличии реплик

7. **Обработка распределённых запросов** - пользователь должен иметь возможность обработать любой запрос вне зависимости от кол-ва узлов, на которых расположены объекты данных.
Система должна поддерживать обработку запросов ссылающиеся на данные расположенные более чем на одном узле
8. **Обработка распределённых транзакций** - система должна поддерживать транзакции с данными расположенными больше чем на одном узле

9. **Независимость от типа оборудования** - система должна быть способна функционироварть на оборудовании с разными вычислительными платформами

10. **Независимость от сетевой архитектуры** - система должна быть способна функционировать в сетях с различными архитекутрами

11. **Независимость от операционной системы** - система должна быть способна функционировать под управлением различных операционных систем

12. **Независимость от типа СУБД** 


## Вопросы к распределённым БД

1. К какому фрагменту обратиться
2. К какой копии обращаться
3. Где расположить временные структуры



## Преимущества распределённых БД

1. Может нативно отображать структуру организации

2. Отказоустойчивость?

3. Повышение доступности и надёжности

4. Модульность системы

5. Повышение производительности.


## Недостатки распределённых БД

1. Повышение сложности

2. Увеличение стоимости владения

3. Проблема защиты

4. Проблема отсутствия стандартов (чувствительность к стандартам)